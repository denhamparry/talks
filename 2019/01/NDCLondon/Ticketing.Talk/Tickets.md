## scaling microservices with message queues, dotnet core and kubernetes
### @denhamparry

---

# Mental Health

---

# Take Photos!

---

![80%](Assets/learnk8s-logo.pdf)

---

![100%](Assets/dotnet.png)

---

![50%](Assets/dotnetcore.png)

---

# Tips

---

## Off the record tips

---

# Containers

^
This is where it all starts.
I became interested in containers because it solved.
The app works like this etc etc

---

# Well known search engine

^
Docker kept popping up for linux.
I was Windows.
I might have a Mac but I was using it as Windows in disguise.

---

# Elton Stoneman

## Docker on Windows

---

![100%](Assets/DockerOnWindows.jpg)

---

## Just what is a "service mesh", and if I get one will it make everything OK?

### 11:40 - 12:40: Room 5

---

![80%](Assets/Aled.jpg)

---

# Microsoft ♥ Linux

---

# But I want it now!

---

# You don't have to use Kubernetes

## Sam Newman

---

# Conference bingo

---

![140%](Assets/containers.jpg)

---

![140%](Assets/mrmeeseeks.gif)

---

# CNCF

---

# https://l.cncf.io

---

![80%](Assets/CNCF.png)

---

![80%](Assets/TrailMap.png)

---

# Learn back

---

![80%](Assets/katacoda.png)

---

# Last Tip

---

# Learn simple things the hard way

---

# Ian Miell (@ianmiell)

## Learn Bash the hard way

---

# https://leanpub.com/learnbashthehardway

---

![80%](Assets/lbthw.png)

---

# [fit] scalability and robustness

---

![fit](Assets/preorder_iphone.png)

---

![fit](Assets/spike-1.pdf)

---

## how do you deal with
# [fit] so much traffic?
## :red_car::blue_car:

---

# backend + frontend

---

![fit](Assets/api-1.pdf)

---

![fit](Assets/api-2.pdf)

---

![fit](Assets/api-3.pdf)

---

![fit](Assets/api-4.pdf)

---

![fit](Assets/api-5.pdf)

---

![fit](Assets/api-6.pdf)

---

![fit](Assets/api-7.pdf)

---

# planning for launch :rocket:

---

![fit](Assets/normal-traffic-1.pdf)

---

![fit](Assets/normal-traffic-2.pdf)

---

![fit](Assets/normal-traffic-3.pdf)

---

![fit](Assets/normal-traffic-4.pdf)

---

![fit](Assets/normal-traffic-5.pdf)

---

# performance tests

---

![fit](Assets/ratio-1.pdf)

---

![fit](Assets/ratio-2.pdf)

---

![fit](Assets/ratio-3.pdf)

---

![fit](Assets/ratio-4.pdf)

---

# ready…

---

![fit](Assets/spike-2.pdf)

---

![fit](Assets/scaling-response-1.pdf)

---

![fit](Assets/scaling-response-2.pdf)

---

![fit](Assets/scaling-response-3.pdf)

---

![fit](Assets/scaling-response-4.pdf)

---

![fit](Assets/scaling-response-5.pdf)

---

![fit](Assets/scaling-response-6.pdf)

---

# too little, too late

---

![fit](Assets/spike-3.pdf)

---

![fit](Assets/dropping-connections-4.pdf)

---

![fit](Assets/dropping-connections-5.pdf)

---

![fit](Assets/dropping-connections-6.pdf)

---

![fit](Assets/dropping-connections-7.pdf)

---

![fit](Assets/dropping-connections-8.pdf)

---

![fit](Assets/dropping-connections-9.pdf)

---

![fit](Assets/dropping-connections-10.pdf)

---

# game over :skull:

---

> nice story, but we know how to do scaling.
-- Someone

---

![fit](Assets/amazon-crash-1.pdf)

---

![fit](Assets/amazon-crash-2.pdf)

---

![fit](Assets/amazon-crash-3.pdf)

---

![fit](Assets/amazon-crash-4.pdf)

---

![fit](Assets/amazon-crash-5.pdf)

---

![fit](Assets/amazon-crash-6.pdf)

---

> **the retailer reportedly** didn't have enough servers to handle the traffic surge **for the day**
-- fortune.com

---

> amazon had to manually add servers to address the issue **(and failed to add them fast enough)**
-- fortune.com

---

# what could you improve?

---

# 1. automatic scaling?

---

# 2. decoupling scaling?

---

![fit](Assets/scaling-in-concert-1.pdf)

---

![fit](Assets/scaling-in-concert-2.pdf)

---

![fit](Assets/scaling-in-concert-3.pdf)

---

![fit](Assets/scaling-in-concert-4.pdf)

---

![fit](Assets/scaling-in-concert-5.pdf)

---

# 3. decoupling failures?

---

![fit](Assets/decoupling-fe-be-1.pdf)

---

![fit](Assets/decoupling-fe-be-2.pdf)

---

![fit](Assets/decoupling-fe-be-3.pdf)

---

![fit](Assets/decoupling-fe-be-4.pdf)

---

![fit](Assets/decoupling-fe-be-5.pdf)

---

![fit](Assets/decoupling-fe-be-6.pdf)

---

![fit](Assets/decoupling-fe-be-7.pdf)

---

![fit](Assets/decoupling-fe-be-8.pdf)

---

# what if…

---

# message broker

---

![fit](Assets/queue-1.pdf)

---

![fit](Assets/queue-2.pdf)

---

![fit](Assets/queue-3.pdf)

---

![fit](Assets/queue-4.pdf)

---

![fit](Assets/queue-5.pdf)

---

![fit](Assets/queue-6.pdf)

---

![fit](Assets/queue-7.pdf)

---

![fit](Assets/queue-8.pdf)

---

![fit](Assets/queue-9.pdf)

---

![fit](Assets/queue-10.pdf)

---

![fit](Assets/queue-11.pdf)

---

![fit](Assets/queue-12.pdf)

---

![fit](Assets/queue-13.pdf)

---

# scale independently :white_check_mark:

---

![fit](Assets/decouple-1.pdf)

---

![fit](Assets/decouple-2.pdf)

---

![fit](Assets/decouple-3.pdf)

---

# can handle failures :white_check_mark:

---

![fit](Assets/handle-failures-1.pdf)

---

# [fit] what about automatic scaling?

---

![fit](Assets/orchestrators-1.pdf)

---

![fit](Assets/orchestrators-2.pdf)

---

# 1. open source

---

# **1. open source**
# 2. multi-cloud

---

# **1. open source**
# **2. multi-cloud**
# 3. designed to scale

---

# scale idependently
# can handle failures
# automatic scaling

---

# scale idependently :white_check_mark:
# can handle failures
# automatic scaling

---

# scale idependently :white_check_mark:
# can handle failures :white_check_mark:
# automatic scaling

---

# scale idependently :white_check_mark:
# can handle failures :white_check_mark:
# automatic scaling :white_check_mark:

---

# sounds like a plan

---

# [fit] demo

---

# the app

---

![fit](Assets/Home.png)

---

![fit](Assets/Processing.png)

---

![fit](Assets/Clap.png)

---

# [fit] containers, containers, containers

---

![fit](Assets/packaging-1.pdf)

---

![fit](Assets/packaging-2.pdf)

---

![fit](Assets/packaging-3.pdf)

---

![fit](Assets/packaging-4.pdf)

---

# deploying apps in kubernetes

---

![fit](Assets/fundamentals-1.pdf)

---

![fit](Assets/fundamentals-2.pdf)

---

![fit](Assets/fundamentals-3.pdf)

---

![fit](Assets/fundamentals-4.pdf)

---

![fit](Assets/fundamentals-5.pdf)

---

![fit](Assets/fundamentals-6.pdf)

---

![fit](Assets/fundamentals-7.pdf)

---

# lessons learned

---

# 1. scaling in k8s

---

![fit](Assets/autoscaling-cluster-1.pdf)

---

![fit](Assets/autoscaling-cluster-2.pdf)

---

![fit](Assets/autoscaling-cluster-3.pdf)

---

![fit](Assets/autoscaling-cluster-4.pdf)

---

![fit](Assets/autoscaling-cluster-5.pdf)

---

![fit](Assets/autoscaling-cluster-6.pdf)

---

![fit](Assets/autoscaling-cluster-7.pdf)

---

![fit](Assets/autoscaling-cluster-8.pdf)

---

![fit](Assets/autoscaling-cluster-9.pdf)

---

# 2. best tetris player ever

---

![fit](Assets/tetris-1.pdf)

---

![fit](Assets/tetris-2.pdf)

---

![fit](Assets/tetris-3.pdf)

---

![fit](Assets/tetris-4.pdf)

---

![fit](Assets/tetris-5.pdf)

---

![fit](Assets/tetris-6.pdf)

---

![fit](Assets/tetris-7.pdf)

---

![fit](Assets/tetris-8.pdf)

---

![fit](Assets/tetris-9.pdf)

---

![fit](Assets/tetris-10.pdf)

---

![fit](Assets/tetris-11.pdf)

---

![fit](Assets/tetris-12.pdf)

---

# 3. kubernetes == rest api

---

![fit](Assets/swagger.png)

---

# [fit] DEMO

---

![fit](Assets/pubconf.png)

---

# questions?
